<!DOCTYPE HTML>
<html lang="en" class="ayu sidebar-visible" dir="ltr">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Assignment 1 - CS6102 Spring 2024-25</title>


        <!-- Custom HTML head -->

        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff">

        <link rel="icon" href="../favicon.svg">
        <link rel="shortcut icon" href="../favicon.png">
        <link rel="stylesheet" href="../css/variables.css">
        <link rel="stylesheet" href="../css/general.css">
        <link rel="stylesheet" href="../css/chrome.css">

        <!-- Fonts -->
        <link rel="stylesheet" href="../FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="../fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="../highlight.css">
        <link rel="stylesheet" href="../tomorrow-night.css">
        <link rel="stylesheet" href="../ayu-highlight.css">

        <!-- Custom theme stylesheets -->

        <!-- MathJax -->
        <script async src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

        <!-- Provide site root to javascript -->
        <script>
            var path_to_root = "../";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "ayu";
        </script>
        <!-- Start loading toc.js asap -->
        <script src="../toc.js"></script>
    </head>
    <body>
    <div id="body-container">
        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script>
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script>
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            const html = document.documentElement;
            html.classList.remove('ayu')
            html.classList.add(theme);
            html.classList.add("js");
        </script>

        <input type="checkbox" id="sidebar-toggle-anchor" class="hidden">

        <!-- Hide / unhide sidebar before it is displayed -->
        <script>
            var sidebar = null;
            var sidebar_toggle = document.getElementById("sidebar-toggle-anchor");
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            } else {
                sidebar = 'hidden';
            }
            sidebar_toggle.checked = sidebar === 'visible';
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <!-- populated by js -->
            <mdbook-sidebar-scrollbox class="sidebar-scrollbox"></mdbook-sidebar-scrollbox>
            <noscript>
                <iframe class="sidebar-iframe-outer" src="../toc.html"></iframe>
            </noscript>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle">
                <div class="sidebar-resize-indicator"></div>
            </div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky">
                    <div class="left-buttons">
                        <label id="sidebar-toggle" class="icon-button" for="sidebar-toggle-anchor" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </label>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">CS6102 Spring 2024-25</h1>

                    <div class="right-buttons">

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script>
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <center>
    <h1 id="assignment-1"><a class="header" href="#assignment-1">Assignment 1</a></h1>
</center>
<hr />
<h2 id="problem-statement"><a class="header" href="#problem-statement">Problem Statement</a></h2>
<p>Implement in Verilog the datapath design of the lightweight block cipher, called PRESENT, a symmetric key encryption technique.</p>
<h2 id="given"><a class="header" href="#given">Given</a></h2>
<p>The plaintext and ciphertext will be of 64 bits or 8 bytes in size and the encryption key length is 80 bits or 10 bytes.</p>
<p>Below is the high-level block diagram of the PRESENT cipher encryption algorithm.</p>
<div align="center">
  <img src="https://raw.githubusercontent.com/kalindkaria/mdbook-assets/master/cs6102_spring2024-25/assignment1/present_cipher_block_diag.png">
</div>
<br>
<blockquote>
<p><strong>IMPORTANT:</strong> Kindly read the document at this <a href="https://docs.google.com/document/d/1mSn4DSswocpQWICLW3UECwfau9wv4tnNMKFrlwPCODQ/edit?usp=sharing">link</a> to create a private repository for the assignment. Do not push everything at the last moment. Maintain a proper commit history.</p>
</blockquote>
<hr />
<h2 id="part-a-deadline-jan-25-2025-1159-pm"><a class="header" href="#part-a-deadline-jan-25-2025-1159-pm">Part A (Deadline: Jan 25, 2025 11:59 PM)</a></h2>
<p>In this part, you will implement the <strong>SBox</strong> or <strong>Substitution Box</strong> design. SBox is a bijection from 4-bits to 4-bits.</p>
<p>The Boolean equation for this design is as follows:</p>
<p>$$y_1 = x_1x_2x_4 \oplus x_1x_3x_4 \oplus x_1 \oplus x_2x_3x_4 \oplus x_2x_3 \oplus x_3 \oplus x_4 \oplus 1$$
$$y_2 = x_1x_2x_4 \oplus x_1x_3x_4 \oplus x_1x_3 \oplus x_1x_4 \oplus x_1 \oplus x_2 \oplus x_3x_4 \oplus 1$$
$$y_3 = x_1x_2x_4 \oplus x_1x_2 \oplus x_1x_3x_4 \oplus x_1x_3 \oplus x_1 \oplus x_2x_3x_4 \oplus x_3$$
$$y_4 = x_1 \oplus x_2x_3 \oplus x_2 \oplus x_4$$</p>
<p>The truth table for this design is as follows:</p>
<div class="table-wrapper"><table><thead><tr><th style="text-align: center">$$x$$</th><th style="text-align: center">0</th><th style="text-align: center">1</th><th style="text-align: center">2</th><th style="text-align: center">3</th><th style="text-align: center">4</th><th style="text-align: center">5</th><th style="text-align: center">6</th><th style="text-align: center">7</th><th style="text-align: center">8</th><th style="text-align: center">9</th><th style="text-align: center">A</th><th style="text-align: center">B</th><th style="text-align: center">C</th><th style="text-align: center">D</th><th style="text-align: center">E</th><th style="text-align: center">F</th></tr></thead><tbody>
<tr><td style="text-align: center">$$S[x]$$</td><td style="text-align: center">C</td><td style="text-align: center">5</td><td style="text-align: center">6</td><td style="text-align: center">B</td><td style="text-align: center">9</td><td style="text-align: center">0</td><td style="text-align: center">A</td><td style="text-align: center">D</td><td style="text-align: center">3</td><td style="text-align: center">E</td><td style="text-align: center">F</td><td style="text-align: center">8</td><td style="text-align: center">4</td><td style="text-align: center">7</td><td style="text-align: center">1</td><td style="text-align: center">2</td></tr>
</tbody></table>
</div>
<p>You can either use a high level concurrency construct or you can use continuous assignments.</p>
<p>The template code provided to you in file <code>sbox.v</code> is as below.</p>
<center>
    <iframe
        src="https://carbon.now.sh/embed?bg=rgba%28171%2C+184%2C+195%2C+1%29&t=seti&wt=none&l=verilog&width=680&ds=true&dsyoff=0px&dsblur=0px&wc=false&wa=true&pv=9px&ph=9px&ln=false&fl=1&fm=Hack&fs=14px&lh=133%25&si=false&es=2x&wm=false&code=module%2520sbox%2520%28inp%252C%2520outp%29%253B%250A%250Ainput%2520%255B3%253A0%255D%2520inp%253B%250Aoutput%2520%255B3%253A0%255D%2520outp%253B%250A%250Areg%2520%255B3%253A0%255D%2520outp%253B%250A%250A%252F%252F%2520implement%2520the%2520SBox%2520design%2520based%2520on%2520the%2520Boolean%2520equations%2520provided%250A%252F%252F%2520use%2520the%2520modelling%2520style%2520of%2520your%2520choice%250A%250A%250Aendmodule%250A"
        style="width: 769px; height: 290px; border:0; transform: scale(1); overflow:hidden;"
        sandbox="allow-scripts allow-same-origin">
    </iframe>
</center>
<p>After completing the design, write the testbench in the provided file <code>tb_sbox.v</code>. Stimulate the input signal of <code>sbox</code> design with all possible input values.</p>
<p>Once completed, ensure the correctness by simulating the design. Use the below commands.</p>
<pre><code class="language-sh">iverilog sbox.v tb_sbox.v -o sbox
vvp sbox
gtkwave sbox_dump.vcd
</code></pre>
<p>The expected timing diagram is shown below.</p>
<div align="center">
  <img src="https://raw.githubusercontent.com/kalindkaria/mdbook-assets/master/cs6102_spring2024-25/assignment1/parta_sbox_sim_output.png">
</div>
<br>
<blockquote>
<p><strong>NOTE:</strong> The format of values (for ex., binary) on the signals displayed in your GTKwave output may not be similar to the one shown in the output above. Need not worry about it, just make sure that the values are correct as per the specifications of the design.</p>
</blockquote>
<hr />
<h2 id="part-b-deadline-feb-01-2025-1159-pm"><a class="header" href="#part-b-deadline-feb-01-2025-1159-pm">Part B (Deadline: Feb 01, 2025 11:59 PM)</a></h2>
<p>In this part, you will implement the datapath design of the PRESENT cipher. The datapath will be constructed from <code>keyschedule</code>, <code>permutation</code> and <code>sbox</code> modules as we can see from the block diagram above.</p>
<p>Open the <code>present_cipher.v</code> file and carry on reading further.</p>
<p>The top module <code>present_cipher</code> which implements the design with separate datapath and controller consists of the below interface signals.</p>
<center>
    <iframe
        src="https://carbon.now.sh/embed?bg=rgba%28171%2C+184%2C+195%2C+1%29&t=seti&wt=none&l=verilog&width=680&ds=true&dsyoff=0px&dsblur=0px&wc=false&wa=true&pv=9px&ph=9px&ln=false&fl=1&fm=Hack&fs=14px&lh=133%25&si=false&es=2x&wm=false&code=input%2520clk%252C%2520rst%253B%250Ainput%2520%255B63%253A0%255D%2520plaintext%253B%2520%2520%2520%2520%2520%2520%2520%2520%2520%252F%252F%252064-bit%2520plaintext%250Ainput%2520%255B79%253A0%255D%2520key%253B%2520%2520%2520%2520%2520%2520%2520%2520%2520%2520%2520%2520%2520%2520%2520%252F%252F%252080-bit%2520encryption%2520key%250Ainput%2520en%253B%2520%2520%2520%2520%2520%2520%2520%2520%2520%2520%2520%2520%2520%2520%2520%2520%2520%2520%2520%2520%2520%2520%2520%252F%252F%2520enable%2520signal%2520for%2520controller%250Ainput%2520prdy%252C%2520krdy%253B%2520%2520%2520%2520%2520%2520%2520%2520%2520%2520%2520%2520%2520%2520%2520%252F%252F%2520plaintext%2520and%2520key%2520ready%2520or%2520available%250Aoutput%2520start%252C%2520done%253B%2520%2520%2520%2520%2520%2520%2520%2520%2520%2520%2520%2520%2520%252F%252F%2520control%2520signals%250Aoutput%2520%255B63%253A0%255D%2520ciphertext%253B%2520%2520%2520%2520%2520%2520%2520%252F%252F%252064-bit%2520ciphertext%250A"
        style="width: 770px; height: 201px; border:0; transform: scale(1); overflow:hidden;"
        sandbox="allow-scripts allow-same-origin">
    </iframe>
</center>
<p>The controller design is implemented in the <code>present_cipher.v</code> file. You have to implement the datapath design based on the block diagram shown above.</p>
<p>The signals of interest for the datapath design are <code>round_counter</code>, <code>pstate</code> and <code>kstate</code>. The signals which will be driven by the datapath and necessary for controller are <code>pstate_nxt</code>, <code>kstate_nxt</code> and <code>nxt_rkey</code>.</p>
<center>
    <iframe
    src="https://carbon.now.sh/embed?bg=rgba%28171%2C+184%2C+195%2C+1%29&t=seti&wt=none&l=verilog&width=680&ds=true&dsyoff=0px&dsblur=0px&wc=false&wa=true&pv=9px&ph=9px&ln=false&fl=1&fm=Hack&fs=14px&lh=133%25&si=false&es=2x&wm=false&code=%252F%252F%2520controller%2520signals%250Areg%2520%255B4%253A0%255D%2520round_counter%253B%2520%2520%2520%2520%2520%2520%2520%2520%252F%252F%2520counter%2520for%2520encryption%2520round%250Areg%2520%255B63%253A0%255D%2520pstate%253B%2520%2520%2520%2520%2520%2520%2520%2520%2520%2520%2520%2520%2520%2520%252F%252F%2520plaintext%2520state%2520reg%250Areg%2520%255B79%253A0%255D%2520kstate%253B%2520%2520%2520%2520%2520%2520%2520%2520%2520%2520%2520%2520%2520%2520%252F%252F%2520round%2520key%2520state%2520reg%250A%250A%252F%252F%2520datapath%2520signals%250Awire%2520%255B63%253A0%255D%2520pstate_nxt%253B%2520%2520%2520%2520%2520%2520%2520%2520%2520%252F%252F%2520next%2520state%2520for%2520plaintext%250Awire%2520%255B79%253A0%255D%2520kstate_nxt%253B%2520%2520%2520%2520%2520%2520%2520%2520%2520%252F%252F%2520next%2520state%2520for%2520key%2520update%250Awire%2520%255B63%253A0%255D%2520rkey_out%253B%2520%2520%2520%2520%2520%2520%2520%2520%2520%2520%2520%252F%252F%2520next%2520round%2520key%250A"
    style="width: 772px; height: 238px; border:0; transform: scale(1); overflow:hidden;"
    sandbox="allow-scripts allow-same-origin">
    </iframe>
</center>
<p>Three modules are defined in the <code>present_cipher.v</code> file, namely</p>
<ul>
<li><code>present_datapath</code> : Datapath design for PRESENT cipher</li>
<li><code>present_keyschedule</code>: Key Schedule design</li>
<li><code>perm</code>: PLayer or bit-permutation design</li>
</ul>
<p>Have a look at the provided comments in the respective modules and implement the respective designs.</p>
<p>Copy the <code>sbox.v</code> file from the <code>part-a</code> to <code>part-b</code> directory, so that the datapath design can use it.</p>
<blockquote>
<p><strong>NOTE:</strong> DO NOT make any changes to the top module named <code>present_cipher</code>.</p>
</blockquote>
<blockquote>
<p><strong>IMPORTANT:</strong> We recommend you to write individual testbench for checking the correctness of your <code>present_keyschedule</code> and <code>perm</code> modules. Its a good practice to verify each module before using them with other modules. <br>This is an <em>optional</em> step but we highly recommend it.</p>
</blockquote>
<p>For ensuring the correctness of your datapath design, we have provided the testbench file <code>tb_present_cipher.v</code>. DO NOT make any changes to this testbench.</p>
<p>Use the below commands to simulate your design.</p>
<pre><code class="language-sh">iverilog present_cipher.v sbox.v tb_present_cipher.v -o present
vvp present
gtkwave present_dump.vcd
</code></pre>
<p>You shall see the below timing diagram in GTKwave.</p>
<div align="center">
  <img src="https://raw.githubusercontent.com/kalindkaria/mdbook-assets/master/cs6102_spring2024-25/assignment1/partb_present_cipher_sim_output.png">
</div>
<br>
<blockquote>
<p><strong>NOTE:</strong> In the provided testbench, the <code>plaintext = 64'hffffffffffffffff</code> and <code>key = 80'h10000000000000000000</code>. Hence the corresponding output for <code>ciphertext = 64'had7d5befea5c6dea</code>.</p>
</blockquote>
<blockquote>
<p><strong>NOTE:</strong> The format of values (for ex., hexadecimal) on the signals displayed in your GTKwave output may not be similar to the one shown in the output above. You can change it to hexadecimal by doing a right-click on a signal and update its radix to <code>Hexadecimal</code>.</p>
</blockquote>
<p>We are providing a C implementation of the PRESENT cipher design in <code>present_cipher.c</code> file. Compile the file and provide the plaintext and key input in the hexadecimal format to see the corresponding ciphertext output.</p>
<div align="center">
  <img src="https://raw.githubusercontent.com/kalindkaria/mdbook-assets/master/cs6102_spring2024-25/assignment1/partb_present_cipher_c_output.png">
</div>
<br>
<p>You can then use the respective combination of plaintext and key in the testbench to ensure whether your datapath design is able to produce correct ciphertext.</p>
<hr />
<h2 id="submission"><a class="header" href="#submission">Submission</a></h2>
<h3 id="part-a"><a class="header" href="#part-a">Part A</a></h3>
<p>Rename the <code>part-a</code> directory to <code>&lt;team-name&gt;_a1_parta</code>. The directory MUST contain these files:</p>
<ul>
<li><code>sbox.v</code></li>
<li><code>tb_sbox.v</code></li>
</ul>
<p>Compress this directory into a <code>tar.gz</code> file using the command:</p>
<pre><code class="language-sh">tar -czvf &lt;team-name&gt;_a1_parta.tar.gz &lt;team-name&gt;_a1_parta
</code></pre>
<p>Upload this <code>&lt;team-name&gt;_a1_parta.tar.gz</code> on the Moodle at the <strong>respective link for Part A</strong>.</p>
<h3 id="part-b"><a class="header" href="#part-b">Part B</a></h3>
<p>Rename the <code>part-b</code> directory to <code>&lt;team-name&gt;_a1_partb</code>. The directory MUST contain these files:</p>
<ul>
<li><code>present_cipher.v</code></li>
<li><code>sbox.v</code></li>
</ul>
<p>Compress this directory into a <code>tar.gz</code> file using the command:</p>
<pre><code class="language-sh">tar -czvf &lt;team-name&gt;_a1_partb.tar.gz &lt;team-name&gt;_a1_partb
</code></pre>
<p>Upload this <code>&lt;team-name&gt;_a1_partb.tar.gz</code> on the Moodle at the <strong>respective link for Part B</strong>.</p>
<blockquote>
<p><strong>IMPORTANT:</strong> Apart from updating your team's private GitHub repository for this assignment, you also need to upload your submission on Moodle.</p>
</blockquote>
<hr />
<br>
<center>
  Best Wishes! 😊
</center>
<br>
<hr />

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="../assignments/deadlines.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>

                            <a rel="next prefetch" href="../resources.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="../assignments/deadlines.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>

                    <a rel="next prefetch" href="../resources.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
            </nav>

        </div>

        <!-- Livereload script (if served using the cli tool) -->
        <script>
            const wsProtocol = location.protocol === 'https:' ? 'wss:' : 'ws:';
            const wsAddress = wsProtocol + "//" + location.host + "/" + "__livereload";
            const socket = new WebSocket(wsAddress);
            socket.onmessage = function (event) {
                if (event.data === "reload") {
                    socket.close();
                    location.reload();
                }
            };

            window.onbeforeunload = function() {
                socket.close();
            }
        </script>



        <script>
            window.playground_copyable = true;
        </script>


        <script src="../elasticlunr.min.js"></script>
        <script src="../mark.min.js"></script>
        <script src="../searcher.js"></script>

        <script src="../clipboard.min.js"></script>
        <script src="../highlight.js"></script>
        <script src="../book.js"></script>

        <!-- Custom JS scripts -->


    </div>
    </body>
</html>
